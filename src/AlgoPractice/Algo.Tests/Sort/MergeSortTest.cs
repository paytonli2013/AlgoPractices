using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Algo.Sort;
using System.Linq;

namespace Algo.Tests.Sort
{
    [TestClass]
    public class MergeSortTest
    {
        [TestMethod]
        public void TestSortArrayWithMergeSort()
        {
            int[] inputArray = new int[] 
            {
                456,21354,23,44,23,3,1,8,2,123,22,32,1,2,22,5,2,8,6,4,3,0,23,15,23,223,444,23,353,457345,324,423,234,64567,234,234,23,423,42,3423,4234,2,3423,4,234,2,345,547,4,84,84,67,546,34,643,53,8345,684,58,46,35,634,56,356,3835,5,75,75,7,5,756,756,7,53,6,2,1,51,3412,4,21412,78,85,69,5,84,5,23,12,31,634,7,48,49,213,31,31,4,47,358,46,754,87,42,42,123412,69,678,95,5,243,2,8,5,985,84,6,45,234,12,31,31,43,63,846,875,8,6,90678,96,84,764,56346,346,345,734567376,345734,56,35432,5254252,43246,23456234,67,54734,237,5427,3445,134,215,367,457,5637,564,76654,34,523,46,247,54,73,1894,452,4,12,42,57,437,34,5432,5,1435,21,6,3546,346,435,6734,54,234,321,4123,5,24,6,5624,57,4,7,4357,534,6,42,34,23,546457357,375,347345,73457347,346,4,23,57,4573878,6,23423,542,45,67856,98,671156161,616,516513,51351,5674,84,1,3486,7,351,2386765,1846,416587,34167,641,3576,7687,35464,678,34,3,41378,123,46,463,87,989,87,1,64,64,6,798,7,9,79,87,9,46,46,4,6,13,1,3,13,21,6,54,697,9,87,987,97,987,9,4,6,46,46,46,4,6,46,4,31,13,1,312,6,54,67,9,87,9,79,4,9,1,12965,1919,1,65,16,1,68,9,7,4,43754735,946,456,1,63164564
            };

            var sort = new MergeSort();

            var output = sort.Compute(Input.From<int[]>(inputArray));

            Assert.AreEqual(output.Length, inputArray.Length);
            Assert.IsTrue(IsSorted(output));
        }

        public static bool IsSorted(int[] array)
        {
            for(var i=0; i<array.Length-1;i++)
            {
                if(array[i]>array[i+1])
                    return false;
            }
            return true;
        }
    }
}
